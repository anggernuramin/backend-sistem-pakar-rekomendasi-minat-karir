  // This is your Prisma schema file,
  // learn more about it in the docs: https://pris.ly/d/prisma-schema

  // Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
  // Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

  generator client {
    provider = "prisma-client-js"
  }

  datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
  }

  enum Role {
    admin
    client
  }

  model User {
    id String @id @default(uuid())
    email String @unique
    name String
    password String
    image String?
    role Role

    konsultasi Konsultasi[]
    historyKonsultasi HistoriKonsultasi[]
  }

  model Keahlian {
    id String @id 
    name String @unique
    description String

    basisAturan BasisAturan[]
    historyKonsultasi HistoriKonsultasi[]

  }

  model Minat {
    id String @id 
    name String @unique

    basisAturan BasisAturan[]
    historyKonsultasi HistoriKonsultasi[]

  }

  model Karir {
    id String @id 
    name String @unique
    description String
    pengembangan_karir String?

    basisAturan BasisAturan[]
  }

  model BasisAturan {
    id        String    @id 
    karirId   String
    karir     Karir     @relation(fields: [karirId], references: [id])
    keahlianId String
    keahlian  Keahlian  @relation(fields: [keahlianId], references: [id])
    minatId   String
    minat     Minat     @relation(fields: [minatId], references: [id])
  }

  model Konsultasi {
    id String @id
    userId String
    user User @relation(fields: [userId], references: [id])
    hasil Json? // jika hasil tidak ada yang cocok maka null
    createdAt DateTime @default(now())

    historyKonsultasi HistoriKonsultasi[]

  }


// menyimpan minat dan keahlian yang dipilih user, dan menampilkan hasil konsultasi sesuai dengan id konsultasi
 model HistoriKonsultasi {
    id              String @id   
    userId          String
    minatId         String
    keahlianId      String
    konsultasiId    String
    createdAt       DateTime  @default(now())

    user            User      @relation(fields: [userId], references: [id])
    konsultasi      Konsultasi @relation(fields: [konsultasiId], references: [id])
    minat           Minat     @relation(fields: [minatId], references: [id])
    keahlian        Keahlian  @relation(fields: [keahlianId], references: [id])
}



